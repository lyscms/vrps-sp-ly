<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>所有影片</title>
    <div th:replace="pub/head_meta"/>
    <div th:replace="pub/head_link"/>
    <div th:replace="pub/head_script"/>

    <link th:href="@{/static/js/manager/list.js}" type="text/css" rel="stylesheet">
</head>
<body>
<div class="container">
    <div class="row">
        <div class="col-sm-3">

            <!--导航-->
            <div th:replace="manager/navigate"/>
            <!--导航-->
        </div>
        <div class="col-sm-9">
            <div style="margin:0px auto;width:100px;"></div>
            <div class="search-box">
                <form action="list.html" method="post">
                    <input type="search" name="name" th:value="${name}" autocomplete="off"
                           placeholder="请输入影片名称"/>
                </form>
            </div>
            <div style="width:100px;margin: 3px auto;">
                <ul class="film-list">
                    <li th:each="list:${pb.list}">
                        <a th:href="film.html?film_id=${list.id}">
                            <div th:title="${list.name}"><img th:src="${list.image}"></div>
                        </a>
                        <div class="film-info">
                            <a th:href="film.html?film_id=${list.id}" th:title="${list.name}" th:text="${list.name}"></a>
                            <p th:text="${list.onDecade}-${list.typeName}"></p>
                        </div>
                    </li>
                </ul>
            </div>
           <!-- <div style="width:80px;margin: 100px auto;height: auto;overflow: hidden;">
                &lt;!&ndash;

                    需要修改 1 处地方

                &ndash;&gt;
                <c:if test="${pb.tr!=0}">
                    <p style="text-align: center;">
                        <c:set var="pageurl" value="list.html"/>   &lt;!&ndash;1.修改&ndash;&gt;
                        <script type="text/javascript">
                            function _change() {
                                var select = document.getElementById("select");
                                location = "${pageurl}?${pb.url}&pc=" + select.value;
                            }
                        </script>

                        第${pb.pc }页/共${pb.tp }页
                        <a href="${pageurl}?${pb.url }&pc=1">首页</a>
                        <c:if test="${pb.pc > 1 }">
                            <a href="${pageurl}?${pb.url }&pc=${pb.pc-1 }">上一页</a>
                        </c:if>

                        <c:if test="${pb.pc == 1 }">
                            <a href="javascript:;">上一页</a>
                        </c:if>


                        &lt;!&ndash;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45; &ndash;&gt;
                        &lt;!&ndash; 页码列表的长度自己定，10个长 &ndash;&gt;
                        <c:choose>
                            &lt;!&ndash; 第一条：如果总页数<=10，那么页码列表为1 ~ tp &ndash;&gt;
                            <c:when test="${pb.tp <= 10 }">
                                <c:set var="begin" value="1"/>
                                <c:set var="end" value="${pb.tp }"/>
                            </c:when>
                            <c:otherwise>
                                &lt;!&ndash; 第二条：按公式计算，让列表的头为当前页-4；列表的尾为当前页+5 &ndash;&gt;
                                <c:set var="begin" value="${pb.pc-4 }"/>
                                <c:set var="end" value="${pb.pc+5 }"/>

                                &lt;!&ndash; 第三条：第二条只适合在中间，而两端会出问题。这里处理begin出界！ &ndash;&gt;
                                &lt;!&ndash; 如果begin<1，那么让begin=1，相应end=10 &ndash;&gt;
                                <c:if test="${begin<1 }">
                                    <c:set var="begin" value="1"/>
                                    <c:set var="end" value="10"/>
                                </c:if>
                                &lt;!&ndash; 第四条：处理end出界。如果end>tp，那么让end=tp，相应begin=tp-9 &ndash;&gt;
                                <c:if test="${end>pb.tp }">
                                    <c:set var="begin" value="${pb.tp-9 }"/>
                                    <c:set var="end" value="${pb.tp }"/>
                                </c:if>
                            </c:otherwise>
                        </c:choose>

                        &lt;!&ndash; 循环显示页码列表 &ndash;&gt;
                        <c:forEach begin="${begin }" end="${end }" var="i">
                            <c:choose>
                                <c:when test="${i eq pb.pc }">${i }</c:when>
                                <c:otherwise>
                                    <a href="${pageurl}?${pb.url }&pc=${i}">[${i }]</a>
                                </c:otherwise>
                            </c:choose>
                        </c:forEach>
                        <c:if test="${pb.pc < pb.tp }"><a href="${pageurl}?${pb.url }&pc=${pb.pc+1 }">下一页</a></c:if>
                        <c:if test="${pb.pc == pb.tp }"><a href="javascript:;">下一页</a></c:if>
                        <a href="${pageurl}?${pb.url}&pc=${pb.tp}">尾页</a>　
                        <select name="pc" onchange="_change()" id="select">
                            <c:forEach begin="1" end="${pb.tp }" var="i">
                                <option value="${i }"
                                <c:if test="${i eq pb.pc }">selected="selected"</c:if> >${i}</option>
                            </c:forEach>
                        </select>
                        &nbsp;总共${pb.tr}部　
                    </p>

                </c:if>
            </div>-->
        </div>
    </div>
</div>
</body>
</html>